//-----------------------------------------------------------------------------------------------------------------------------------------------------------//
//-----------------------------------------------------------------------------------------------------------------------------------------------------------//
#include "mesh_handler.h"
#include <graphics/mesh.h>
#include <graphics/scene.h>
//-----------------------------------------------------------------------------------------------------------------------------------------------------------//
//-----------------------------------------------------------------------------------------------------------------------------------------------------------//

//-----------------------------------------------------------------------------------------------------------------------------------------------------------//
//-----------------------------------------------------------------------------------------------------------------------------------------------------------//
void MeshHandler::AssignFirstMesh(const char* filename, gef::Scene** scene, gef::Mesh** mesh, gef::Platform* platform) 
{
	//Set scene and mesh
	gef::Scene* scn = new gef::Scene;
	scn->ReadSceneFromFile(*platform, filename);

	scn->CreateMaterials(*platform);

	*mesh = getFirstMesh(scn, platform);
	*scene = scn;
}
//-----------------------------------------------------------------------------------------------------------------------------------------------------------//
//-----------------------------------------------------------------------------------------------------------------------------------------------------------//

//-----------------------------------------------------------------------------------------------------------------------------------------------------------//
//-----------------------------------------------------------------------------------------------------------------------------------------------------------//
gef::Mesh* MeshHandler::getFirstMesh(gef::Scene* scene, gef::Platform* platform)
{
	//Load mesh
	gef::Mesh* mesh = NULL;

	if (scene)
	{
		if (scene->mesh_data.size() > 0)
			mesh = scene->CreateMesh(*platform, scene->mesh_data.front());
	}

	return mesh;
}
//-----------------------------------------------------------------------------------------------------------------------------------------------------------//
//-----------------------------------------------------------------------------------------------------------------------------------------------------------//